# ç®¡ç†é¢æ¿ä½¿ç”¨æŒ‡å—

## ğŸ¨ æ¦‚è¿°

TVBox èšåˆæœåŠ¡æä¾›äº†ä¸€ä¸ªç°ä»£åŒ–çš„ Web ç®¡ç†é¢æ¿ï¼Œè®©æ‚¨å¯ä»¥è½»æ¾ç›‘æ§å’Œç®¡ç†é…ç½®æºã€‚

**è®¿é—®åœ°å€**: `https://your-project.deno.dev/admin`

---

## ğŸ“Š åŠŸèƒ½ä»‹ç»

### 1. å®æ—¶ç»Ÿè®¡é¢æ¿

ä½äºé¡µé¢é¡¶éƒ¨çš„å››ä¸ªç»Ÿè®¡å¡ç‰‡ï¼š

| æŒ‡æ ‡ | è¯´æ˜ | æ›´æ–°é¢‘ç‡ |
|------|------|---------|
| **æ€»è¯·æ±‚æ•°** | ç´¯è®¡æ¥æ”¶çš„è¯·æ±‚æ•° | å®æ—¶ |
| **ä»Šæ—¥è¯·æ±‚** | è¿‡å»24å°æ—¶çš„è¯·æ±‚æ•° | å®æ—¶ |
| **å“åº”æ—¶é—´** | å¹³å‡å“åº”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ | å®æ—¶ |
| **å¥åº·æº** | å½“å‰å¯ç”¨çš„é…ç½®æºæ•°é‡ | æ¯30ç§’ |

### 2. å¿«é€Ÿæ“ä½œåŒº

ä¸‰ä¸ªå¿«æ·æŒ‰é’®ï¼š

- **ğŸ”„ åˆ·æ–°ç»Ÿè®¡** - ç«‹å³åˆ·æ–°æ‰€æœ‰ç»Ÿè®¡æ•°æ®
- **âœ… å¥åº·æ£€æŸ¥** - è§¦å‘æ‰€æœ‰é…ç½®æºçš„å¥åº·æ£€æŸ¥
- **ğŸ—‘ï¸ æ¸…ç©ºç¼“å­˜** - æ¸…é™¤æ‰€æœ‰ç¼“å­˜æ•°æ®

### 3. é…ç½®æºåˆ—è¡¨

æ˜¾ç¤ºæ‰€æœ‰é…ç½®æºçš„è¯¦ç»†ä¿¡æ¯ï¼š

| åˆ— | è¯´æ˜ |
|-----|------|
| **åç§°** | æºçš„åç§°å’Œ URL |
| **ä¼˜å…ˆçº§** | æ•°å€¼è¶Šé«˜ä¼˜å…ˆçº§è¶Šé«˜ï¼ˆ1-100ï¼‰ |
| **çŠ¶æ€** | å¥åº·ï¼ˆç»¿è‰²ï¼‰/ é™çº§ï¼ˆé»„è‰²ï¼‰/ å¤±è´¥ï¼ˆçº¢è‰²ï¼‰ |
| **å“åº”æ—¶é—´** | æœ€åä¸€æ¬¡è¯·æ±‚çš„å“åº”æ—¶é—´ |
| **æœ€åæ£€æŸ¥** | ä¸Šæ¬¡å¥åº·æ£€æŸ¥çš„æ—¶é—´ |
| **æ“ä½œ** | æµ‹è¯• / å¯ç”¨æˆ–ç¦ç”¨ |

---

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1: æ—¥å¸¸ç›‘æ§

**é¢‘ç‡**: æ¯å¤© 1-2 æ¬¡

**æ“ä½œ**:
1. è®¿é—®ç®¡ç†é¢æ¿
2. æŸ¥çœ‹ç»Ÿè®¡å¡ç‰‡ï¼Œäº†è§£æœåŠ¡çŠ¶æ€
3. æ£€æŸ¥é…ç½®æºåˆ—è¡¨ï¼Œç¡®è®¤å¥åº·æºæ•°é‡
4. å¦‚æœå‘ç°å¤±è´¥æºï¼Œç‚¹å‡»"æµ‹è¯•"æŒ‰é’®éªŒè¯

### åœºæ™¯ 2: æ·»åŠ æ–°æºå

**æ“ä½œ**:
1. ç¼–è¾‘ `config/sources.json` æ·»åŠ æ–°æº
2. é‡æ–°éƒ¨ç½²æœåŠ¡
3. è®¿é—®ç®¡ç†é¢æ¿
4. ç‚¹å‡»"å¥åº·æ£€æŸ¥"æµ‹è¯•æ‰€æœ‰æºï¼ˆåŒ…æ‹¬æ–°æºï¼‰
5. ç¡®è®¤æ–°æºçŠ¶æ€ä¸º"å¥åº·"

### åœºæ™¯ 3: æ€§èƒ½ä¼˜åŒ–

**æ“ä½œ**:
1. æŸ¥çœ‹å“åº”æ—¶é—´ç»Ÿè®¡
2. å¦‚æœå“åº”æ—¶é—´ > 1000msï¼Œç‚¹å‡»"æ¸…ç©ºç¼“å­˜"
3. è§‚å¯Ÿç¼“å­˜å‘½ä¸­ç‡çš„æ”¹å–„
4. å¿…è¦æ—¶ç¦ç”¨é«˜å»¶è¿Ÿçš„æº

### åœºæ™¯ 4: æ•…éšœæ’æŸ¥

**ç—‡çŠ¶**: éƒ¨åˆ†ç”¨æˆ·æ— æ³•è·å–é…ç½®

**æ“ä½œ**:
1. è®¿é—®ç®¡ç†é¢æ¿
2. æ£€æŸ¥å¥åº·æºæ•°é‡æ˜¯å¦ä¸‹é™
3. æŸ¥çœ‹æ˜¯å¦æœ‰å¤§é‡æºæ˜¾ç¤º"å¤±è´¥"çŠ¶æ€
4. ç‚¹å‡»"æµ‹è¯•"æŒ‰é’®é‡æ–°éªŒè¯å¤±è´¥çš„æº
5. å¦‚æœæŒç»­å¤±è´¥ï¼Œè€ƒè™‘æ›´æ–°æºé…ç½®

---

## ğŸ”§ é…ç½®å’Œè‡ªå®šä¹‰

### ä¿®æ”¹è‡ªåŠ¨åˆ·æ–°é—´éš”

é»˜è®¤æ¯ 30 ç§’è‡ªåŠ¨åˆ·æ–°ç»Ÿè®¡ã€‚è¦ä¿®æ”¹æ­¤è®¾ç½®ï¼š

ç¼–è¾‘ `src/presentation/api/admin.route.ts`:

```typescript
// å°† 30000 æ”¹ä¸ºä½ æƒ³è¦çš„æ¯«ç§’æ•°
setInterval(() => {
    loadStats();
}, 30000); // 30ç§’ = 30000æ¯«ç§’
```

ç„¶åé‡æ–°éƒ¨ç½²ã€‚

### æ·»åŠ è®¤è¯ä¿æŠ¤

ä¸ºäº†ä¿æŠ¤ç®¡ç†é¢æ¿ï¼Œå¯ä»¥æ·»åŠ ç®€å•çš„è®¤è¯ï¼š

```typescript
// åœ¨ main.ts ä¸­æ·»åŠ 
const authMiddleware = async (ctx: any, next: any) => {
  const auth = ctx.request.headers.get("Authorization");
  if (auth !== `Bearer ${Deno.env.get("ADMIN_TOKEN")}`) {
    ctx.response.status = 401;
    ctx.response.body = { error: "Unauthorized" };
    return;
  }
  await next();
};

// åº”ç”¨åˆ°ç®¡ç†è·¯ç”±
app.use("/admin", authMiddleware, adminRouter.routes());
```

è®¾ç½®ç¯å¢ƒå˜é‡ï¼š
```bash
export ADMIN_TOKEN=your-secret-token
```

### è‡ªå®šä¹‰ä¸»é¢˜é¢œè‰²

ç¼–è¾‘ `src/presentation/api/admin.route.ts` ä¸­çš„ CSS:

```css
/* ä¸»è‰²è°ƒ */
--primary-color: #667eea;

/* æˆåŠŸè‰² */
--success-color: #48bb78;

/* å±é™©è‰² */
--danger-color: #f56565;
```

---

## ğŸ“± API ç«¯ç‚¹

ç®¡ç†é¢æ¿ä½¿ç”¨ä»¥ä¸‹ API ç«¯ç‚¹ï¼š

### è·å–ç»Ÿè®¡ä¿¡æ¯
```http
GET /admin/api/stats
```

**å“åº”**:
```json
{
  "totalRequests": 15234,
  "todayRequests": 1234,
  "avgResponseTime": 245,
  "uptime": "2d 5h 32m",
  "sources": {
    "total": 7,
    "healthy": 6,
    "degraded": 1,
    "failed": 0
  },
  "cache": {
    "hitRate": 0.72,
    "size": "45.2 KB",
    "entries": 12
  }
}
```

### è·å–æºåˆ—è¡¨
```http
GET /admin/api/sources
```

**å“åº”**:
```json
{
  "success": true,
  "data": [
    {
      "id": "fantaiying",
      "name": "é¥­å¤ªç¡¬",
      "url": "http://www.xn--sss604efuw.com/tv/",
      "priority": 100,
      "status": "healthy",
      "responseTime": 234,
      "enabled": true
    }
  ]
}
```

### æµ‹è¯•å•ä¸ªæº
```http
POST /admin/api/sources/:id/test
```

### åˆ‡æ¢æºçŠ¶æ€
```http
POST /admin/api/sources/:id/toggle
```

### æ¸…ç©ºç¼“å­˜
```http
POST /admin/api/cache/clear
```

### è§¦å‘å¥åº·æ£€æŸ¥
```http
POST /admin/api/health/check
```

---

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: ç»Ÿè®¡æ•°æ®ä¸æ›´æ–°

**ç—‡çŠ¶**: åˆ·æ–°é¡µé¢åæ•°æ®ä»ç„¶æ˜¯æ—§çš„

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯
2. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
3. ç¡®è®¤åç«¯æœåŠ¡æ­£å¸¸è¿è¡Œ

### é—®é¢˜ 2: æ— æ³•æµ‹è¯•æº

**ç—‡çŠ¶**: ç‚¹å‡»"æµ‹è¯•"æŒ‰é’®æ²¡æœ‰ååº”

**è§£å†³æ–¹æ¡ˆ**:
1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
2. åˆ‡æ¢åˆ° Console æ ‡ç­¾
3. æŸ¥çœ‹é”™è¯¯ä¿¡æ¯
4. ç¡®è®¤ç½‘ç»œè¯·æ±‚æ˜¯å¦æˆåŠŸï¼ˆNetwork æ ‡ç­¾ï¼‰

### é—®é¢˜ 3: æºçŠ¶æ€æ˜¾ç¤ºé”™è¯¯

**ç—‡çŠ¶**: æºå®é™…å¯ç”¨ä½†æ˜¾ç¤º"å¤±è´¥"

**è§£å†³æ–¹æ¡ˆ**:
1. ç‚¹å‡»"æµ‹è¯•"æŒ‰é’®é‡æ–°éªŒè¯
2. å¦‚æœä»ç„¶å¤±è´¥ï¼Œå¯èƒ½æ˜¯æºæœåŠ¡å™¨æš‚æ—¶ä¸å¯ç”¨
3. ç­‰å¾…å‡ åˆ†é’Ÿåå†æ¬¡æµ‹è¯•

---

## ğŸ’¡ æœ€ä½³å®è·µ

1. **å®šæœŸæ£€æŸ¥** - æ¯å‘¨è®¿é—®ä¸€æ¬¡ç®¡ç†é¢æ¿
2. **åŠæ—¶æ›´æ–°** - å‘ç°å¤±æ•ˆæºåŠæ—¶æ›´æ–°é…ç½®
3. **ç›‘æ§æ€§èƒ½** - å…³æ³¨å“åº”æ—¶é—´å˜åŒ–
4. **å¤‡ä»½æ•°æ®** - å®šæœŸå¯¼å‡ºé…ç½®æ–‡ä»¶
5. **æµ‹è¯•å˜æ›´** - ä¿®æ”¹é…ç½®åå…ˆæµ‹è¯•å†éƒ¨ç½²

---

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·ï¼š
- æäº¤ GitHub Issue
- æŸ¥çœ‹ DEPLOYMENT.md æ–‡æ¡£
- è”ç³»æŠ€æœ¯æ”¯æŒ

**äº«å—ä½¿ç”¨ç®¡ç†é¢æ¿ï¼** ğŸ‰
